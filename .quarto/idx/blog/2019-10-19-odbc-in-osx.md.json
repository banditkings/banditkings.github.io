{"title":"How to set up ODBC in Mac OS to connect to MS SQL Server for use with Python and R","markdown":{"yaml":{"title":"How to set up ODBC in Mac OS to connect to MS SQL Server for use with Python and R","date":"2019-10-19","tags":["r","python","workflow"],"categories":["workflow"],"summary":"My local data mart runs on MS SQL Server, and I want to pull data directly into R or Python for data analysis. This is **really** easy on Windows with its' built-in ODBC manager, but I spent a weekend figuring out how to do this after switching to OSX. A lot of documentation out there is old (from 2012), so I decided to make this for anyone still looking for an answer in 2019.","canonicalUrl":"https://www.nelsontang.com/blog/2019-10-19-odbc-in-osx"},"headingText":"1. Install unixodbc","containsRefs":false,"markdown":"\n\nMy local data mart runs on MS SQL Server, and I want to pull data directly into R or Python for data analysis. This is **really** easy on Windows with its' built-in ODBC manager, but I spent a weekend figuring out how to do this after switching to OSX. A lot of documentation out there is old (from 2012), so I decided to make this for anyone still looking for an answer in 2019.\n\n- Microsoft Open Database Connectivity (ODBC) Docs: [link](https://docs.microsoft.com/en-us/sql/odbc/reference/what-is-odbc?view=sql-server-ver15)\n\nBelow are my notes for a quickstart setup for getting your MacOS (OSX) machine set up to connect to a Microsoft SQL Server via ODBC for use with R's ODBC library and Python's PyODBC library. This assumes you have [homebrew](https://brew.sh) installed to manage your packages and you have the necessary admin rights on your machine.\n\n- Homebrew installation: [link](https://docs.brew.sh/Installation)\n\n\nI like unixodbc as the ODBC manager, it just works. Install with your shell/terminal:\n\n```console\nbrew install unixodbc\n```\n\n- UnixODBC docs: [link](https://docs.brew.sh/Installation)\n\n## 2. Install FreeTDS\n\nAfter getting an ODBC manager, you'll need drivers. FreeTDS works.\nIn your shell/terminal:\n\n```console\nbrew install FreeTDS\n```\n\n- FreeTDS userguide: [link](https://www.freetds.org/userguide/)\n\n## 3. Locate your odbc installation with odbcinst -j\n\nAfter installing unixodbc as your odbc manager and freeTDS for drivers, you'll need to edit your connections in the .odbc.ini file. You can find out where this is by using the `odbcinst -j` command.\n\nIn your shell/terminal:\n\n```console\nodbcinst -j\n\nunixODBC 2.3.7\nDRIVERS............: /etc/odbcinst.ini\nSYSTEM DATA SOURCES: /etc/odbc.ini\nFILE DATA SOURCES..: /etc/ODBCDataSources\nUSER DATA SOURCES..: /Users/yourname/.odbc.ini\nSQLULEN Size.......: 8\nSQLLEN Size........: 8\nSQLSETPOSIROW Size.: 8\n```\n\nThe item in `USER DATA SOURCES..:` is what you're looking for. Don't know why, but Python and R like to use that one first before looking elsewhere. Navigate there and edit the `.odbc.ini` file using your favorite text editor. Here's nano:\n\n```console\nnano /Users/yourname/.odbc.ini\n```\n\n## 4. Update the .odbc.ini file\n\nUse your text editor and enter in the required server, port, and the Data Source Name (DSN) in brackets. We'll use the DSN to connect\n\n```\n[my_server]\nDescription = my_server\nTDS_Version = 7.4\nDriver = /usr/local/lib/libtdsodbc.so\nServer = YOUR.SERVERNAME.HERE.com\nPort = 1234\n```\n\n- What is a DSN: [link](https://support.microsoft.com/en-us/help/966849/what-is-a-dsn-data-source-name)\n\n## 5. Python to connect to your MS SQL Server with pyodbc\n\n```python\nimport pandas as pd\nimport pyodbc\n\ncnxn = pyodbc.connect('dsn=my_server;'\n                      'Trusted_Connection=yes;')\nquery= \"yourqueryhere\"\n\nres = pd.read_sql_query(query,cnxn)\n\ncnxn.close()\n```\n\n## 6. R to connect to your MS SQL Server with odbc\n\n```r\nlibrary(odbc)\ncon <- dbConnect(odbc::odbc(), \"my_server\")\nres <- odbc::dbGetQuery(con, \"your query here\")\nodbc::dbDisconnect(con)\n```\n","srcMarkdownNoYaml":"\n\nMy local data mart runs on MS SQL Server, and I want to pull data directly into R or Python for data analysis. This is **really** easy on Windows with its' built-in ODBC manager, but I spent a weekend figuring out how to do this after switching to OSX. A lot of documentation out there is old (from 2012), so I decided to make this for anyone still looking for an answer in 2019.\n\n- Microsoft Open Database Connectivity (ODBC) Docs: [link](https://docs.microsoft.com/en-us/sql/odbc/reference/what-is-odbc?view=sql-server-ver15)\n\nBelow are my notes for a quickstart setup for getting your MacOS (OSX) machine set up to connect to a Microsoft SQL Server via ODBC for use with R's ODBC library and Python's PyODBC library. This assumes you have [homebrew](https://brew.sh) installed to manage your packages and you have the necessary admin rights on your machine.\n\n- Homebrew installation: [link](https://docs.brew.sh/Installation)\n\n## 1. Install unixodbc\n\nI like unixodbc as the ODBC manager, it just works. Install with your shell/terminal:\n\n```console\nbrew install unixodbc\n```\n\n- UnixODBC docs: [link](https://docs.brew.sh/Installation)\n\n## 2. Install FreeTDS\n\nAfter getting an ODBC manager, you'll need drivers. FreeTDS works.\nIn your shell/terminal:\n\n```console\nbrew install FreeTDS\n```\n\n- FreeTDS userguide: [link](https://www.freetds.org/userguide/)\n\n## 3. Locate your odbc installation with odbcinst -j\n\nAfter installing unixodbc as your odbc manager and freeTDS for drivers, you'll need to edit your connections in the .odbc.ini file. You can find out where this is by using the `odbcinst -j` command.\n\nIn your shell/terminal:\n\n```console\nodbcinst -j\n\nunixODBC 2.3.7\nDRIVERS............: /etc/odbcinst.ini\nSYSTEM DATA SOURCES: /etc/odbc.ini\nFILE DATA SOURCES..: /etc/ODBCDataSources\nUSER DATA SOURCES..: /Users/yourname/.odbc.ini\nSQLULEN Size.......: 8\nSQLLEN Size........: 8\nSQLSETPOSIROW Size.: 8\n```\n\nThe item in `USER DATA SOURCES..:` is what you're looking for. Don't know why, but Python and R like to use that one first before looking elsewhere. Navigate there and edit the `.odbc.ini` file using your favorite text editor. Here's nano:\n\n```console\nnano /Users/yourname/.odbc.ini\n```\n\n## 4. Update the .odbc.ini file\n\nUse your text editor and enter in the required server, port, and the Data Source Name (DSN) in brackets. We'll use the DSN to connect\n\n```\n[my_server]\nDescription = my_server\nTDS_Version = 7.4\nDriver = /usr/local/lib/libtdsodbc.so\nServer = YOUR.SERVERNAME.HERE.com\nPort = 1234\n```\n\n- What is a DSN: [link](https://support.microsoft.com/en-us/help/966849/what-is-a-dsn-data-source-name)\n\n## 5. Python to connect to your MS SQL Server with pyodbc\n\n```python\nimport pandas as pd\nimport pyodbc\n\ncnxn = pyodbc.connect('dsn=my_server;'\n                      'Trusted_Connection=yes;')\nquery= \"yourqueryhere\"\n\nres = pd.read_sql_query(query,cnxn)\n\ncnxn.close()\n```\n\n## 6. R to connect to your MS SQL Server with odbc\n\n```r\nlibrary(odbc)\ncon <- dbConnect(odbc::odbc(), \"my_server\")\nres <- odbc::dbGetQuery(con, \"your query here\")\nodbc::dbDisconnect(con)\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"output-file":"2019-10-19-odbc-in-osx.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.52","theme":{"light":"cosmo"},"title-block-banner":true,"title":"How to set up ODBC in Mac OS to connect to MS SQL Server for use with Python and R","date":"2019-10-19","tags":["r","python","workflow"],"categories":["workflow"],"summary":"My local data mart runs on MS SQL Server, and I want to pull data directly into R or Python for data analysis. This is **really** easy on Windows with its' built-in ODBC manager, but I spent a weekend figuring out how to do this after switching to OSX. A lot of documentation out there is old (from 2012), so I decided to make this for anyone still looking for an answer in 2019.","canonicalUrl":"https://www.nelsontang.com/blog/2019-10-19-odbc-in-osx"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}